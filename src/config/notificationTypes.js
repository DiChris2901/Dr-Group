/**
 * üìß CAT√ÅLOGO CENTRALIZADO DE TIPOS DE NOTIFICACIONES
 * DR Group Dashboard - Sistema de Notificaciones v2.0
 * 
 * Este archivo define todos los tipos de notificaciones disponibles en el sistema,
 * sus configuraciones, templates y reglas de env√≠o.
 */

export const NOTIFICATION_CATEGORIES = {
  USER_MANAGEMENT: 'user_management',
  COMMITMENTS_DUE: 'commitments_due',
  COMMITMENTS_CRITICAL: 'commitments_critical',
  CONTRACTS: 'contracts',
  PAYMENTS: 'payments',
  INCOMES: 'incomes',
  REPORTS: 'reports',
  SECURITY: 'security',
  SYSTEM: 'system'
};

export const NOTIFICATION_TYPES = {
  // üßë‚Äçüíº GESTI√ìN DE USUARIOS
  USER_CREATED: {
    id: 'user_created',
    category: NOTIFICATION_CATEGORIES.USER_MANAGEMENT,
    name: 'Nuevo Usuario Creado',
    description: 'Cuando se crea un nuevo usuario en el sistema',
    icon: '‚úÖ',
    color: '#4caf50',
    enabled: true,
    instantSend: true,
    emailSubject: 'üéâ Bienvenido a DR Group Dashboard',
    priority: 'normal'
  },
  
  USER_UPDATED: {
    id: 'user_updated',
    category: NOTIFICATION_CATEGORIES.USER_MANAGEMENT,
    name: 'Usuario Actualizado',
    description: 'Cuando se actualiza informaci√≥n del usuario',
    icon: '‚úèÔ∏è',
    color: '#ff9800',
    enabled: true,
    instantSend: true,
    emailSubject: 'üìù Tu informaci√≥n ha sido actualizada - DR Group',
    priority: 'normal'
  },
  
  ROLE_CHANGED: {
    id: 'role_changed',
    category: NOTIFICATION_CATEGORIES.USER_MANAGEMENT,
    name: 'Cambio de Rol',
    description: 'Cuando cambian roles o permisos de usuario',
    icon: 'üîÑ',
    color: '#f44336',
    enabled: true,
    instantSend: true,
    emailSubject: 'üîê Tus permisos han cambiado - DR Group',
    priority: 'high'
  },

  // üìÖ COMPROMISOS PR√ìXIMOS A VENCER
  DUE_IN_15_DAYS: {
    id: 'due_in_15_days',
    category: NOTIFICATION_CATEGORIES.COMMITMENTS_DUE,
    name: '15 d√≠as antes del vencimiento',
    description: 'Alerta temprana de compromiso pr√≥ximo',
    icon: 'üìÖ',
    color: '#2196f3',
    enabled: true,
    instantSend: false,
    scheduledTime: '09:00', // 9:00 AM
    emailSubject: 'üìÖ Recordatorio: Compromiso vence en 15 d√≠as',
    priority: 'normal'
  },
  
  DUE_IN_7_DAYS: {
    id: 'due_in_7_days',
    category: NOTIFICATION_CATEGORIES.COMMITMENTS_DUE,
    name: '1 semana antes del vencimiento',
    description: 'Alerta de compromiso pr√≥ximo en 7 d√≠as',
    icon: '‚è∞',
    color: '#ff9800',
    enabled: true,
    instantSend: false,
    scheduledTime: '09:00',
    emailSubject: '‚ö†Ô∏è Importante: Compromiso vence en 7 d√≠as',
    priority: 'high'
  },
  
  DUE_IN_2_DAYS: {
    id: 'due_in_2_days',
    category: NOTIFICATION_CATEGORIES.COMMITMENTS_DUE,
    name: '2 d√≠as antes del vencimiento',
    description: 'Alerta urgente de compromiso muy pr√≥ximo',
    icon: 'üîî',
    color: '#f44336',
    enabled: true,
    instantSend: false,
    scheduledTime: '08:00', // 8:00 AM
    emailSubject: 'üö® URGENTE: Compromiso vence en 2 d√≠as',
    priority: 'critical'
  },
  
  DUE_TODAY: {
    id: 'due_today',
    category: NOTIFICATION_CATEGORIES.COMMITMENTS_DUE,
    name: 'El d√≠a del vencimiento',
    description: 'Alerta cr√≠tica el d√≠a de vencimiento',
    icon: 'üî¥',
    color: '#d32f2f',
    enabled: true,
    instantSend: false,
    scheduledTime: '07:00', // 7:00 AM
    emailSubject: 'üî¥ CR√çTICO: Compromiso vence HOY',
    priority: 'critical'
  },

  // üö® COMPROMISOS CR√çTICOS (NUEVOS - FASE 1)
  COMMITMENT_OVERDUE: {
    id: 'commitment_overdue',
    category: NOTIFICATION_CATEGORIES.COMMITMENTS_CRITICAL,
    name: 'Compromiso Vencido',
    description: 'Cuando un compromiso pasa de la fecha de vencimiento sin pagarse',
    icon: '‚ùå',
    color: '#c62828',
    enabled: true,
    instantSend: false,
    scheduledTime: '10:00', // 10:00 AM diario
    frequency: 'daily', // Se env√≠a diariamente mientras est√© vencido
    emailSubject: '‚ùå COMPROMISO VENCIDO - Acci√≥n requerida',
    priority: 'critical'
  },

  COMMITMENT_HIGH_VALUE: {
    id: 'commitment_high_value',
    category: NOTIFICATION_CATEGORIES.COMMITMENTS_CRITICAL,
    name: 'Compromiso de Alto Valor',
    description: 'Cuando se crea o vence un compromiso mayor al umbral configurado',
    icon: 'üíé',
    color: '#7b1fa2',
    enabled: true,
    instantSend: true,
    threshold: 50000000, // $50M COP por defecto (configurable)
    emailSubject: 'üíé ALERTA: Compromiso de Alto Valor',
    priority: 'high'
  },

  COMMITMENT_COMPLETED: {
    id: 'commitment_completed',
    category: NOTIFICATION_CATEGORIES.COMMITMENTS_CRITICAL,
    name: 'Compromiso Completado',
    description: 'Cuando se completa el pago total de un compromiso',
    icon: '‚úÖ',
    color: '#2e7d32',
    enabled: true,
    instantSend: true,
    emailSubject: '‚úÖ Compromiso Completado - DR Group',
    priority: 'normal'
  },

  // ÔøΩ CONTRATOS DE EMPRESAS (NUEVOS - FASE 2)
  CONTRACT_365_DAYS: {
    id: 'contract_365_days',
    category: NOTIFICATION_CATEGORIES.CONTRACTS,
    name: 'Contrato vence en 1 a√±o',
    description: 'Alerta temprana de vencimiento de contrato (365 d√≠as)',
    icon: 'üìÑ',
    color: '#0288d1',
    enabled: true,
    instantSend: false,
    scheduledTime: '09:00',
    emailSubject: 'üìÑ Recordatorio: Contrato vence en 1 a√±o',
    priority: 'low'
  },

  CONTRACT_180_DAYS: {
    id: 'contract_180_days',
    category: NOTIFICATION_CATEGORIES.CONTRACTS,
    name: 'Contrato vence en 6 meses',
    description: 'Alerta de vencimiento de contrato (180 d√≠as)',
    icon: 'üìã',
    color: '#0288d1',
    enabled: true,
    instantSend: false,
    scheduledTime: '09:00',
    emailSubject: 'üìã Importante: Contrato vence en 6 meses',
    priority: 'normal'
  },

  CONTRACT_90_DAYS: {
    id: 'contract_90_days',
    category: NOTIFICATION_CATEGORIES.CONTRACTS,
    name: 'Contrato vence en 3 meses',
    description: 'Alerta de vencimiento de contrato (90 d√≠as)',
    icon: 'üìå',
    color: '#f57c00',
    enabled: true,
    instantSend: false,
    scheduledTime: '09:00',
    emailSubject: '‚ö†Ô∏è Atenci√≥n: Contrato vence en 3 meses',
    priority: 'high'
  },

  CONTRACT_30_DAYS: {
    id: 'contract_30_days',
    category: NOTIFICATION_CATEGORIES.CONTRACTS,
    name: 'Contrato vence en 1 mes',
    description: 'Alerta urgente de vencimiento de contrato (30 d√≠as)',
    icon: '‚ö†Ô∏è',
    color: '#f44336',
    enabled: true,
    instantSend: false,
    scheduledTime: '08:00',
    emailSubject: 'üö® URGENTE: Contrato vence en 30 d√≠as',
    priority: 'high'
  },

  CONTRACT_DUE_TODAY: {
    id: 'contract_due_today',
    category: NOTIFICATION_CATEGORIES.CONTRACTS,
    name: 'Contrato vence hoy',
    description: 'Notificaci√≥n el d√≠a del vencimiento del contrato',
    icon: 'üî¥',
    color: '#d32f2f',
    enabled: true,
    instantSend: true,
    emailSubject: 'üö® CR√çTICO: Contrato vence HOY',
    priority: 'critical'
  },

  CONTRACT_EXPIRED: {
    id: 'contract_expired',
    category: NOTIFICATION_CATEGORIES.CONTRACTS,
    name: 'Contrato Vencido',
    description: 'Contrato ya vencido (env√≠o diario durante 30 d√≠as)',
    icon: '‚ùå',
    color: '#b71c1c',
    enabled: true,
    instantSend: true,
    emailSubject: '‚ùå CR√çTICO: Contrato VENCIDO',
    priority: 'critical'
  },

  // ÔøΩüí≥ PAGOS (NUEVOS - FASE 1)
  PAYMENT_REGISTERED: {
    id: 'payment_registered',
    category: NOTIFICATION_CATEGORIES.PAYMENTS,
    name: 'Pago Registrado',
    description: 'Cuando se registra un pago en el sistema',
    icon: 'üí∏',
    color: '#1976d2',
    enabled: true,
    instantSend: true,
    emailSubject: 'üí∏ Pago Registrado - DR Group',
    priority: 'normal'
  },

  PAYMENT_PARTIAL: {
    id: 'payment_partial',
    category: NOTIFICATION_CATEGORIES.PAYMENTS,
    name: 'Pago Parcial',
    description: 'Cuando se registra un abono parcial a un compromiso',
    icon: 'üí∞',
    color: '#0288d1',
    enabled: true,
    instantSend: true,
    emailSubject: 'üí∞ Abono Parcial Registrado',
    priority: 'low'
  },

  // üìà INGRESOS (NUEVOS - FASE 2)
  INCOME_RECEIVED: {
    id: 'income_received',
    category: NOTIFICATION_CATEGORIES.INCOMES,
    name: 'Ingreso Recibido',
    description: 'Cuando se registra un ingreso o consignaci√≥n',
    icon: 'üìà',
    color: '#388e3c',
    enabled: true,
    instantSend: true,
    emailSubject: 'üìà Ingreso Registrado - DR Group',
    priority: 'normal'
  },

  BANK_BALANCE_LOW: {
    id: 'bank_balance_low',
    category: NOTIFICATION_CATEGORIES.INCOMES,
    name: 'Saldo Bancario Bajo',
    description: 'Cuando el balance de una cuenta es menor al umbral',
    icon: '‚ö†Ô∏è',
    color: '#f57c00',
    enabled: false, // Deshabilitado por defecto (requiere configuraci√≥n)
    instantSend: true,
    threshold: 5000000, // $5M COP por defecto
    emailSubject: '‚ö†Ô∏è ALERTA: Saldo Bancario Bajo',
    priority: 'high'
  },

  // üìä REPORTES Y RES√öMENES (NUEVOS - FASE 2)
  WEEKLY_SUMMARY: {
    id: 'weekly_summary',
    category: NOTIFICATION_CATEGORIES.REPORTS,
    name: 'Resumen Semanal',
    description: 'Resumen de actividad semanal cada lunes',
    icon: 'üìß',
    color: '#0097a7',
    enabled: true,
    instantSend: false,
    scheduledTime: '08:00',
    frequency: 'weekly',
    dayOfWeek: 1, // Lunes
    emailSubject: 'üìä Resumen Semanal - DR Group',
    priority: 'normal'
  },

  MONTHLY_SUMMARY: {
    id: 'monthly_summary',
    category: NOTIFICATION_CATEGORIES.REPORTS,
    name: 'Resumen Mensual',
    description: 'Cierre mensual el primer d√≠a del mes',
    icon: 'üìÖ',
    color: '#00796b',
    enabled: true,
    instantSend: false,
    scheduledTime: '09:00',
    frequency: 'monthly',
    dayOfMonth: 1, // D√≠a 1 de cada mes
    emailSubject: 'üìà Cierre Mensual - DR Group',
    priority: 'normal'
  },

  CASH_FLOW_ALERT: {
    id: 'cash_flow_alert',
    category: NOTIFICATION_CATEGORIES.REPORTS,
    name: 'Alerta de Flujo de Caja',
    description: 'Proyecci√≥n de flujo negativo en pr√≥ximos 30 d√≠as',
    icon: 'üí∞',
    color: '#d84315',
    enabled: false, // Deshabilitado (requiere an√°lisis predictivo)
    instantSend: true,
    emailSubject: '‚ö†Ô∏è ALERTA: Flujo de Caja Negativo Proyectado',
    priority: 'critical'
  },

  // üîê SEGURIDAD (NUEVOS - FASE 3)
  CRITICAL_PERMISSION_CHANGE: {
    id: 'critical_permission_change',
    category: NOTIFICATION_CATEGORIES.SECURITY,
    name: 'Cambio de Permiso Cr√≠tico',
    description: 'Cuando se asigna rol Admin o Super Admin',
    icon: 'üõ°Ô∏è',
    color: '#c62828',
    enabled: true,
    instantSend: true,
    emailSubject: 'üîê SEGURIDAD: Cambio Cr√≠tico de Permisos',
    priority: 'critical',
    notifyAdmins: true // Notifica a todos los admins
  },

  SUSPICIOUS_ACCESS: {
    id: 'suspicious_access',
    category: NOTIFICATION_CATEGORIES.SECURITY,
    name: 'Acceso Sospechoso',
    description: 'Intentos de login fallidos (3+ consecutivos)',
    icon: 'üö®',
    color: '#b71c1c',
    enabled: false, // Deshabilitado (implementaci√≥n futura)
    instantSend: true,
    threshold: 3, // Intentos fallidos
    emailSubject: 'üö® SEGURIDAD: Acceso Sospechoso Detectado',
    priority: 'critical',
    notifyAdmins: true
  },

  DATA_EXPORT: {
    id: 'data_export',
    category: NOTIFICATION_CATEGORIES.SECURITY,
    name: 'Exportaci√≥n de Datos',
    description: 'Cuando se exporta un reporte importante',
    icon: 'üì•',
    color: '#6a1b9a',
    enabled: false, // Deshabilitado (auditor√≠a avanzada)
    instantSend: true,
    emailSubject: 'üì• Exportaci√≥n de Datos Realizada',
    priority: 'low'
  },

  // üìã OTROS
  NEW_COMMITMENT: {
    id: 'new_commitment',
    category: NOTIFICATION_CATEGORIES.SYSTEM,
    name: 'Nuevo Compromiso Agregado',
    description: 'Cuando se crea un nuevo compromiso',
    icon: '‚ú®',
    color: '#1976d2',
    enabled: true,
    instantSend: true,
    emailSubject: '‚ú® Nuevo Compromiso Creado - DR Group',
    priority: 'low'
  },

  AUTOMATIC_EVENTS: {
    id: 'automatic_events',
    category: NOTIFICATION_CATEGORIES.SYSTEM,
    name: 'Eventos Autom√°ticos',
    description: 'Coljuegos, Parafiscales, UIAF, etc.',
    icon: 'ü§ñ',
    color: '#00897b',
    enabled: true,
    instantSend: false,
    scheduledTime: '06:00', // 6:00 AM
    emailSubject: 'ü§ñ Recordatorio: Eventos Autom√°ticos',
    priority: 'normal'
  }
};

/**
 * Obtener configuraci√≥n de notificaci√≥n por ID
 */
export const getNotificationType = (typeId) => {
  return Object.values(NOTIFICATION_TYPES).find(type => type.id === typeId) || null;
};

/**
 * Obtener notificaciones por categor√≠a
 */
export const getNotificationsByCategory = (category) => {
  return Object.values(NOTIFICATION_TYPES).filter(type => type.category === category);
};

/**
 * Obtener notificaciones habilitadas
 */
export const getEnabledNotifications = () => {
  return Object.values(NOTIFICATION_TYPES).filter(type => type.enabled);
};

/**
 * Obtener notificaciones instant√°neas
 */
export const getInstantNotifications = () => {
  return Object.values(NOTIFICATION_TYPES).filter(type => type.instantSend && type.enabled);
};

/**
 * Obtener notificaciones programadas
 */
export const getScheduledNotifications = () => {
  return Object.values(NOTIFICATION_TYPES).filter(type => !type.instantSend && type.enabled);
};

/**
 * Obtener configuraci√≥n por defecto para nuevos usuarios
 */
export const getDefaultNotificationSettings = () => {
  const settings = {};
  Object.values(NOTIFICATION_TYPES).forEach(type => {
    settings[type.id] = {
      email: type.enabled,
      telegram: false, // Telegram deshabilitado por defecto
      push: false // Push deshabilitado por defecto
    };
  });
  return settings;
};

export default NOTIFICATION_TYPES;
