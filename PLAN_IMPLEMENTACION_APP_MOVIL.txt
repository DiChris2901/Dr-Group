â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PLAN DE IMPLEMENTACIÃ“N - APP MÃ“VIL DR GROUP
   Fecha: 11 de noviembre de 2025
   Funcionalidades: Chat + Roles + Notificaciones Android
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 1: SISTEMA DE ROLES Y PERMISOS (2-3 horas)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ PASO 1.1: Modificar AuthContext
   UbicaciÃ³n: mobile/src/contexts/AuthContext.js
   
   âœ… Agregar al estado:
   - userRole (extraÃ­do de userProfile.role)
   - hasPermission(permission) â†’ funciÃ³n helper
   
   âœ… Implementar:
   const hasPermission = (permission) => {
     if (!userProfile) return false;
     
     // SUPER_ADMIN tiene todos los permisos
     if (userProfile.role === 'SUPER_ADMIN') return true;
     
     // ADMIN tiene permisos especÃ­ficos
     if (userProfile.role === 'ADMIN') {
       const adminPermissions = [
         'asistencias.ver_todos',
         'reportes.generar',
         'usuarios.ver',
         'chat'
       ];
       return adminPermissions.includes(permission);
     }
     
     // USER solo tiene permisos bÃ¡sicos
     if (userProfile.role === 'USER') {
       const userPermissions = ['chat', 'asistencia.propia'];
       return userPermissions.includes(permission);
     }
     
     return false;
   };

---

ğŸ“ PASO 1.2: Crear componente ProtectedScreen
   UbicaciÃ³n: mobile/src/components/ProtectedScreen.js
   
   âœ… Crear archivo:
   import React from 'react';
   import { View, Text, StyleSheet } from 'react-native';
   import { useAuth } from '../contexts/AuthContext';
   
   const ProtectedScreen = ({ children, requiredPermission }) => {
     const { hasPermission } = useAuth();
     
     if (!hasPermission(requiredPermission)) {
       return (
         <View style={styles.container}>
           <Text style={styles.title}>ğŸ”’ Acceso Denegado</Text>
           <Text style={styles.message}>
             No tienes permisos para acceder a esta secciÃ³n
           </Text>
         </View>
       );
     }
     
     return children;
   };
   
   export default ProtectedScreen;

---

ğŸ“ PASO 1.3: Modificar AppNavigator
   UbicaciÃ³n: mobile/src/navigation/AppNavigator.js
   
   âœ… Importar:
   import { useAuth } from '../contexts/AuthContext';
   
   âœ… Dentro del Stack.Navigator:
   const { userProfile } = useAuth();
   const userRole = userProfile?.role || 'USER';
   
   {/* Pantallas para TODOS */}
   <Stack.Screen name="Dashboard" component={DashboardScreen} />
   <Stack.Screen name="Chat" component={ChatScreen} />
   
   {/* Pantallas solo ADMIN */}
   {(userRole === 'ADMIN' || userRole === 'SUPER_ADMIN') && (
     <>
       <Stack.Screen name="Asistencias" component={AsistenciasScreen} />
       <Stack.Screen name="Reportes" component={ReportesScreen} />
     </>
   )}

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 2: INTEGRACIÃ“N DE CHAT (3-4 horas)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ PASO 2.1: Instalar dependencias
   Terminal: cd mobile
   
   âœ… Ejecutar:
   npx expo install expo-image-picker
   npx expo install expo-document-picker
   npx expo install expo-file-system
   npx expo install @react-native-firebase/storage  (si necesitas subir archivos)

---

ğŸ“ PASO 2.2: Crear ChatContext
   UbicaciÃ³n: mobile/src/contexts/ChatContext.js
   
   âœ… Estructura base:
   - Estado: messages, loading, unreadCount
   - FunciÃ³n: sendMessage(text, attachments)
   - FunciÃ³n: markAsRead()
   - Listener: onSnapshot para mensajes en tiempo real
   
   âœ… Reutilizar lÃ³gica de:
   src/context/ChatContext.jsx (del dashboard web)
   
   âœ… Adaptar para React Native:
   - Usar Firestore directamente (ya configurado)
   - Collection: 'chats'
   - Ordenar por: createdAt DESC
   - LÃ­mite: 50 mensajes (paginaciÃ³n despuÃ©s)

---

ğŸ“ PASO 2.3: Crear ChatScreen
   UbicaciÃ³n: mobile/src/screens/chat/ChatScreen.js
   
   âœ… Componentes principales:
   1. FlatList para mensajes (invertido)
   2. TextInput con botones de adjuntar
   3. BotÃ³n de enviar
   4. Indicador de "escribiendo..."
   
   âœ… Funcionalidades:
   - Cargar mensajes al abrir
   - Scroll automÃ¡tico al nuevo mensaje
   - Seleccionar imagen (expo-image-picker)
   - Seleccionar archivo (expo-document-picker)
   - Mostrar avatar del usuario
   - Formato de hora (HH:MM)

---

ğŸ“ PASO 2.4: Crear componente ChatMessage
   UbicaciÃ³n: mobile/src/screens/chat/ChatMessage.js
   
   âœ… DiseÃ±o sobrio:
   - Burbuja con borderRadius: 16
   - Color propio mensaje: alpha(primary, 0.1)
   - Color otros mensajes: alpha(divider, 0.1)
   - Avatar pequeÃ±o (28x28)
   - Nombre del usuario arriba
   - Hora abajo (caption)

---

ğŸ“ PASO 2.5: Agregar navegaciÃ³n al Chat
   UbicaciÃ³n: mobile/src/screens/dashboard/DashboardScreen.js
   
   âœ… Agregar botÃ³n flotante:
   <TouchableOpacity 
     style={styles.chatButton}
     onPress={() => navigation.navigate('Chat')}
   >
     <View>
       <MessageIcon />
       {unreadCount > 0 && (
         <Badge>{unreadCount}</Badge>
       )}
     </View>
   </TouchableOpacity>
   
   âœ… PosiciÃ³n: Esquina inferior derecha (fixed)

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 3: NOTIFICACIONES ANDROID (3-4 horas)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ PASO 3.1: Instalar dependencias
   Terminal: cd mobile
   
   âœ… Ejecutar:
   npx expo install expo-notifications
   npx expo install expo-device
   npx expo install expo-constants

---

ğŸ“ PASO 3.2: Configurar app.json
   UbicaciÃ³n: mobile/app.json
   
   âœ… Agregar en "android":
   "permissions": [
     "NOTIFICATIONS",
     "VIBRATE",
     "POST_NOTIFICATIONS"
   ],
   "useNextNotificationsApi": true

---

ğŸ“ PASO 3.3: Crear NotificationsContext
   UbicaciÃ³n: mobile/src/contexts/NotificationsContext.js
   
   âœ… Funcionalidades:
   1. Pedir permisos al usuario (registerForPushNotificationsAsync)
   2. Configurar canal de Android (setNotificationChannelAsync)
   3. Listener de notificaciones en foreground
   4. Listener de respuesta a notificaciÃ³n (tap)
   
   âœ… Canales a crear:
   - 'work-session' (Jornada laboral - prioridad alta)
   - 'chat' (Mensajes de chat - prioridad alta)
   - 'reminders' (Recordatorios - prioridad media)

---

ğŸ“ PASO 3.4: Implementar notificaciÃ³n persistente de tiempo
   UbicaciÃ³n: mobile/src/screens/dashboard/DashboardScreen.js
   
   âœ… Al iniciar sesiÃ³n (registrar entrada):
   - Crear notificaciÃ³n persistente (ongoing: true)
   - ID fijo: 'work-session-notification'
   
   âœ… Actualizar cada 60 segundos:
   useEffect(() => {
     const interval = setInterval(() => {
       if (activeSession && activeSession.estadoActual !== 'finalizado') {
         updateWorkSessionNotification(activeSession);
       }
     }, 60000); // 1 minuto
     
     return () => clearInterval(interval);
   }, [activeSession]);
   
   âœ… Contenido de la notificaciÃ³n:
   TÃ­tulo: "ğŸ• Jornada Laboral Activa"
   Cuerpo: 
     "Entrada: 08:00 AM"
     "Tiempo trabajado: 02:35:18"
     "Estado: Trabajando"
   
   âœ… Al finalizar jornada:
   - Cancelar notificaciÃ³n (dismissNotificationAsync)

---

ğŸ“ PASO 3.5: Implementar notificaciones de chat
   UbicaciÃ³n: mobile/src/contexts/ChatContext.js
   
   âœ… En el listener de mensajes:
   onSnapshot(chatsQuery, (snapshot) => {
     snapshot.docChanges().forEach((change) => {
       if (change.type === 'added') {
         const message = change.doc.data();
         
         // No notificar si es mensaje propio
         if (message.uid === currentUser.uid) return;
         
         // No notificar si app estÃ¡ en foreground en ChatScreen
         if (isAppActive && isInChatScreen) return;
         
         // Mostrar notificaciÃ³n
         showChatNotification(message);
       }
     });
   });
   
   âœ… FunciÃ³n showChatNotification:
   const showChatNotification = async (message) => {
     await Notifications.scheduleNotificationAsync({
       content: {
         title: `ğŸ’¬ ${message.userName}`,
         body: message.text || '[Archivo adjunto]',
         sound: true,
         priority: 'high',
         data: { 
           screen: 'Chat',
           messageId: message.id 
         }
       },
       trigger: null // Inmediato
     });
   };
   
   âœ… Al tocar notificaciÃ³n:
   - Navegar a ChatScreen
   - Scroll hasta el mensaje especÃ­fico (opcional)

---

ğŸ“ PASO 3.6: Manejar respuesta a notificaciones
   UbicaciÃ³n: mobile/App.js
   
   âœ… Agregar listener:
   useEffect(() => {
     const subscription = Notifications.addNotificationResponseReceivedListener(
       (response) => {
         const screen = response.notification.request.content.data.screen;
         
         if (screen === 'Chat') {
           navigationRef.current?.navigate('Chat');
         }
       }
     );
     
     return () => subscription.remove();
   }, []);

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 4: TESTING Y AJUSTES (1-2 horas)                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“‹ PASO 4.1: Testing de Roles
   âœ… Crear usuario de prueba ROL USER:
   - Verificar que solo ve Dashboard y Chat
   - Verificar que NO puede acceder a Asistencias/Reportes
   
   âœ… Crear usuario de prueba ROL ADMIN:
   - Verificar que ve todas las pantallas
   - Verificar que puede acceder a Asistencias/Reportes

---

ğŸ“‹ PASO 4.2: Testing de Chat
   âœ… Enviar mensaje de texto â†’ debe aparecer en tiempo real
   âœ… Enviar imagen â†’ debe subir y mostrar
   âœ… Enviar archivo â†’ debe subir y mostrar nombre
   âœ… Badge de no leÃ­dos â†’ debe actualizar
   âœ… Scroll automÃ¡tico â†’ debe ir al Ãºltimo mensaje

---

ğŸ“‹ PASO 4.3: Testing de Notificaciones
   âœ… NotificaciÃ³n de jornada:
   - Aparece al registrar entrada
   - Se actualiza cada minuto
   - Muestra tiempo correcto
   - No se puede cerrar (ongoing)
   - Se elimina al finalizar jornada
   
   âœ… NotificaciÃ³n de chat:
   - Aparece cuando llega mensaje (app en background)
   - NO aparece si estÃ¡s en ChatScreen
   - Al tocar â†’ abre ChatScreen
   - Sonido y vibraciÃ³n funcionan

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 5: PANTALLAS ADICIONALES PARA ADMIN (Opcional - 2-3 horas)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ PASO 5.1: Crear AsistenciasScreen (solo admin)
   UbicaciÃ³n: mobile/src/screens/asistencias/AsistenciasScreen.js
   
   âœ… Funcionalidades:
   - Ver asistencias de todos los usuarios
   - Filtrar por fecha
   - Ver detalles (entrada, breaks, almuerzo, salida)
   - Exportar a Excel (compartir archivo)

---

ğŸ“ PASO 5.2: Crear ReportesScreen (solo admin)
   UbicaciÃ³n: mobile/src/screens/reportes/ReportesScreen.js
   
   âœ… Funcionalidades:
   - EstadÃ­sticas generales (horas trabajadas, promedios)
   - GrÃ¡ficos simples (victory-native o react-native-chart-kit)
   - Filtrar por usuario/fecha
   - Exportar reportes

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESTRUCTURA FINAL DE ARCHIVOS                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

mobile/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”œâ”€â”€ AuthContext.js              âœï¸ MODIFICAR (agregar hasPermission)
â”‚   â”‚   â”œâ”€â”€ ChatContext.js              â• CREAR
â”‚   â”‚   â”œâ”€â”€ NotificationsContext.js     â• CREAR
â”‚   â”‚   â””â”€â”€ ThemeContext.js             (sin cambios)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ProtectedScreen.js          â• CREAR
â”‚   â”‚   â”œâ”€â”€ SobrioCard.js               (sin cambios)
â”‚   â”‚   â”œâ”€â”€ DetailRow.js                (sin cambios)
â”‚   â”‚   â””â”€â”€ OverlineText.js             (sin cambios)
â”‚   â”‚
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â””â”€â”€ LoginScreen.js          (sin cambios)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ DashboardScreen.js      âœï¸ MODIFICAR (notificaciÃ³n persistente)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatScreen.js           â• CREAR
â”‚   â”‚   â”‚   â””â”€â”€ ChatMessage.js          â• CREAR
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ asistencias/
â”‚   â”‚   â”‚   â””â”€â”€ AsistenciasScreen.js    â• CREAR (solo admin)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ reportes/
â”‚   â”‚       â””â”€â”€ ReportesScreen.js       â• CREAR (solo admin)
â”‚   â”‚
â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â””â”€â”€ AppNavigator.js             âœï¸ MODIFICAR (rutas por rol)
â”‚   â”‚
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ firebase.js                 (sin cambios)
â”‚
â”œâ”€â”€ App.js                              âœï¸ MODIFICAR (listener notificaciones)
â”œâ”€â”€ app.json                            âœï¸ MODIFICAR (permisos Android)
â””â”€â”€ package.json                        âœï¸ MODIFICAR (nuevas dependencias)

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMANDOS A EJECUTAR (en orden)                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# 1. Navegar a directorio mÃ³vil
cd C:\Users\darg1\Desktop\Dr-Group\mobile

# 2. Instalar dependencias de chat
npx expo install expo-image-picker
npx expo install expo-document-picker
npx expo install expo-file-system

# 3. Instalar dependencias de notificaciones
npx expo install expo-notifications
npx expo install expo-device
npx expo install expo-constants

# 4. Iniciar servidor de desarrollo
npx expo start

# 5. Al finalizar todo - Build de producciÃ³n
eas build --platform android

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONSIDERACIONES IMPORTANTES                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš ï¸  NOTIFICACIONES:
   - Probar en dispositivo REAL (no emulador)
   - Verificar permisos en ConfiguraciÃ³n > Aplicaciones > DR Group
   - Android 13+ requiere permiso explÃ­cito POST_NOTIFICATIONS

âš ï¸  CHAT:
   - Usar FlatList con keyExtractor Ãºnico (message.id)
   - Implementar paginaciÃ³n si hay mÃ¡s de 100 mensajes
   - Comprimir imÃ¡genes antes de subir (max 1MB)

âš ï¸  ROLES:
   - Verificar roles en Firestore: users/{uid}/role
   - Por defecto: 'USER'
   - Cambiar manualmente en Firestore para probar

âš ï¸  PERFORMANCE:
   - Usar React.memo() en ChatMessage
   - Detach listeners al desmontar componentes
   - Optimizar imÃ¡genes con expo-image

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PREGUNTAS CLAVE ANTES DE EMPEZAR                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Â¿Chat Ãºnico general o mÃºltiples chats/grupos?
   â†’ Por simplicidad, empezar con chat Ãºnico general

2. Â¿Usuarios normales pueden ver asistencias de otros?
   â†’ No, solo su propia asistencia

3. Â¿Notificaciones de recordatorios? (ej: "Llevas 4 horas sin break")
   â†’ Implementar en Fase 5 (opcional)

4. Â¿Reutilizar UI del dashboard web o diseÃ±o nativo?
   â†’ DiseÃ±o nativo con componentes sobrios existentes

5. Â¿Soporte para iOS tambiÃ©n?
   â†’ De momento solo Android (notificaciones cambian en iOS)

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESTIMACIÃ“N TOTAL                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FASE 1: Roles y permisos          â†’ 2-3 horas
FASE 2: Chat                      â†’ 3-4 horas
FASE 3: Notificaciones            â†’ 3-4 horas
FASE 4: Testing                   â†’ 1-2 horas
FASE 5: Pantallas admin (opcional) â†’ 2-3 horas

TOTAL: 9-13 horas (sin Fase 5: 9-13 horas)

Dividir en 2-3 dÃ­as de trabajo:
- DÃA 1: Fases 1 + 2 (roles + chat)
- DÃA 2: Fase 3 + 4 (notificaciones + testing)
- DÃA 3: Fase 5 (opcional - pantallas admin)

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RECURSOS ÃšTILES                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“š DocumentaciÃ³n:
- Expo Notifications: https://docs.expo.dev/versions/latest/sdk/notifications/
- Expo Image Picker: https://docs.expo.dev/versions/latest/sdk/imagepicker/
- Firestore Queries: https://firebase.google.com/docs/firestore/query-data/queries

ğŸ“ Archivos de referencia (dashboard web):
- src/context/ChatContext.jsx â†’ LÃ³gica de chat
- src/components/chat/ â†’ UI de chat
- src/context/NotificationsContext.jsx â†’ Sistema de notificaciones

ğŸ¨ DiseÃ±o sobrio a seguir:
- docs/DISENO_SOBRIO_NOTAS.md â†’ GuÃ­a de diseÃ±o
- borderRadius: 16 para cards/chips
- alpha(theme.palette.primary.main, 0.5) para bordes
- No gradientes (excepto headers)

---

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FIN DEL PLAN - LISTO PARA IMPLEMENTAR MAÃ‘ANA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
